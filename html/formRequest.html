<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--should add '/js/' to indicate the accurate path-->
    <script src="/js/myJquery.js"></script>
    <title>Page name: Personal Information</title>
</head>
<body>
<h1>h1:Personal Information</h1>
<br>
<h2>h2:</h2>
<a href="https://www.bing.com">bing</a>
<br>
<img src="/images/visualizingpoisoning.png" alt="https://www.bing.com" width="158" height="158">
<br>
<br>
<form id="infoForm">
    <label for="fname">Name:</label><br>
    <input type="text" id="fname" value="John"><br><br>
    <label for="fnumber">Phone number:</label><br>
    <input type="text" id="fnumber" value="15858588888"><br><br>
    <input type="submit" value="Submit">

    <button type="button">clike me to submit data</button>
    <p id="demo">明月几时有，把酒问青天</p>
</form>

<script>
    $(document).ready(function () {
        $("#infoForm").submit(function () {
            // Prevent the form from submitting via the browser.
            event.preventDefault();
            searchViaAjax();

        });
    });

    function searchViaAjax() {
        var data = {}
        data["name"] = $("#fname").val();
        data["phone"] = $("#fnumber").val();

        var jsonData = {
            name: $("#fname").val(),
            phone: $("#fnumber").val(),
        }

        $.ajax({
            type: "GET",
            contentType: "application/json",
            url: "http://localhost:8888/greeting",
            data: JSON.stringify(jsonData), //need add "param="+JSON.stringify(jsonData) 否则后端接收不到参数 或者在spring controller上加@ResponseBody
            dataType: 'json',
            timeout: 100000,

            success: function (data) {
                //console.log("SUCCESS: ", data);
                //display(data);
                alert("Success:" + JSON.stringify(data));
            },
            error: function (e) {
                //console.log("ERROR: ", e);
                //display(e);
                alert("Error:" + JSON.stringify(e));
            },
            done: function (e) {
                console.log("DONE");
            }
        });
    }

</script>

</body>
</html>